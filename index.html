<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Force Brute Ultra-Rapide Lisse</title>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;overflow:hidden;background:black;font-family:Consolas,monospace;}
canvas{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;}
.glass{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  backdrop-filter: blur(16px) saturate(200%);
  background: rgba(0,0,0,0.25);
  border-radius:20px;
  border:1px solid rgba(0,255,0,0.3);
  padding:20px 30px;
  width:90%; max-width:900px;
  text-align:center;
  color:#0f0;
  z-index:1;
  box-shadow:0 0 20px rgba(0,255,0,0.7);
}
h1{margin:0;color:#0f0;text-shadow:0 0 10px #0f0,0 0 20px #00ff00;}
label{display:block;margin-top:10px;font-size:14px;color:#88ff88;}
input{width:100%;padding:10px;margin-top:6px;border-radius:10px;border:none;background:rgba(0,255,0,0.08);color:#0f0;font-size:16px;}
button{padding:10px 16px;margin:6px;border:none;border-radius:12px;background:linear-gradient(45deg,#0f0,#00aa00);color:#001f20;font-weight:700;cursor:pointer;transition:.2s;}
button:hover{filter:brightness(1.3);}
button.ghost{background:transparent;border:1px solid rgba(0,255,0,0.3);}
.controls{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:12px;}
.progress{height:18px;background:rgba(0,255,0,0.1);border-radius:999px;margin-top:12px;overflow:hidden;}
.progress>div{height:100%;width:0;background:linear-gradient(90deg,#0f0,#00ff00);box-shadow:0 0 15px #0f0;transition:width .05s linear;}
#summary{font-size:13px;margin-top:8px;color:#88ff88;}
#testedCodes{margin-top:12px;height:150px;width:100%;background:rgba(0,0,0,0.2);color:#0f0;border-radius:12px;padding:8px;overflow-y:scroll;font-size:12px;line-height:1.3;user-select:none;}
#timer{margin-top:8px;color:#0f0;font-size:14px;}
</style>
</head>
<body>
<canvas id="matrix"></canvas>
<div class="glass">
  <h1>⚡ Test ton mots de passe ⚡</h1>
  <label>Mot de passe</label>
  <input id="password" type="text" value="abc">
  <div class="controls">
    <button id="startBtn">Lancer</button>
    <button id="stopBtn" class="ghost" disabled>Arrêter</button>
  </div>
  <div class="progress"><div id="bar"></div></div>
  <div id="summary">Clique sur Lancer pour commencer</div>
  <div id="timer">Temps écoulé: 0:00</div>
  <div id="testedCodes"></div>
</div>
<audio id="beep" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="></audio>

<script>
const canvas=document.getElementById('matrix');
const ctx=canvas.getContext('2d');
let width=canvas.width=window.innerWidth;
let height=canvas.height=window.innerHeight;

const pwdEl=document.getElementById('password'),
barEl=document.getElementById('bar'),
summaryEl=document.getElementById('summary'),
testedEl=document.getElementById('testedCodes'),
timerEl=document.getElementById('timer'),
startBtn=document.getElementById('startBtn'),
stopBtn=document.getElementById('stopBtn'),
beep=document.getElementById('beep');

let simState={running:false,attempts:0n,prevAttempt:"",found:false,logs:[],timer:null,startTime:0,gen:null};
const alphabet='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+[]{}|;:,.<>?';
let fontSize=Math.min(20,width/50);
let columns=Math.floor(width/fontSize);
let drops=new Array(columns).fill(1);
let lightning=[];

let buffer=[]; // Buffer pour DOM
function updateTestedCodes(){
  if(buffer.length===0) return;
  testedEl.innerHTML += buffer.join('<br>')+'<br>';
  testedEl.scrollTop = testedEl.scrollHeight;
  buffer.length=0;
}

function* enumerator(len,chars){
  const idx=new Array(len).fill(0);
  const base=chars.length;
  if(base<=0)return;
  while(true){
    yield idx.map(i=>chars[i]).join('');
    let pos=len-1;
    while(pos>=0){
      idx[pos]++;
      if(idx[pos]<base)break;
      idx[pos]=0;pos--;
    }
    if(pos<0) return;
  }
}

function formatTime(seconds){
  const m=Math.floor(seconds/60);
  const s=seconds%60;
  return `${m}:${s.toString().padStart(2,'0')}`;
}

function startSim(){
  const pwd=pwdEl.value||"";
  if(pwd.length===0){alert("Mot de passe vide");return;}
  if(simState.running){return;}

  simState.running=true;
  simState.attempts=0n;
  simState.prevAttempt="";
  simState.found=false;
  simState.startTime=Date.now();
  simState.gen=null;
  buffer=[];
  testedEl.innerHTML='';
  startBtn.disabled=true; stopBtn.disabled=false;

  simState.timer=setInterval(()=>{
    if(simState.found){clearInterval(simState.timer); startBtn.disabled=false; stopBtn.disabled=true; return;}

    const elapsed=Math.floor((Date.now()-simState.startTime)/1000);
    timerEl.textContent="Temps écoulé: "+formatTime(elapsed);

    // Force brute rapide: plusieurs essais par tick
    for(let i=0;i<200;i++){ // plus rapide
      if(!simState.gen) simState.gen=enumerator(pwd.length,alphabet);
      const {value,done}=simState.gen.next();
      if(done){simState.running=false; break;}
      simState.prevAttempt=value;
      simState.logs.push(value);
      simState.attempts+=1n;

      buffer.push(value);

      if(value===pwd){
        simState.found=true;
        beep.currentTime=0; beep.play();
        createLightningForAttempt(value);
        break;
      }
    }

    updateTestedCodes();
    barEl.style.width=(Number(simState.attempts)/100000*100).toFixed(2)+'%';
    summaryEl.textContent=`Essais: ${simState.attempts.toString()}${simState.found?" ✅ Trouvé!":""}`;
  },20);
}

function createLightningForAttempt(attempt){
  lightning.push({time:0,chars:attempt});
}

startBtn.addEventListener('click',startSim);
stopBtn.addEventListener('click',()=>{
  if(simState.timer) clearInterval(simState.timer);
  simState.running=false;
  startBtn.disabled=false;
  stopBtn.disabled=true;
  summaryEl.textContent+=" ⏹ Arrêt manuel";
});

function drawMatrix(){
  ctx.fillStyle="rgba(0,0,0,0.05)";
  ctx.fillRect(0,0,width,height);
  ctx.font=fontSize+"px monospace";

  ctx.fillStyle="#0f0";
  for(let i=0;i<drops.length;i++){
    if(i%2===0){
      const text=alphabet[Math.floor(Math.random()*alphabet.length)];
      ctx.fillText(text,i*fontSize,drops[i]*fontSize);
      drops[i]++;
      if(drops[i]*fontSize>height || Math.random()>0.97) drops[i]=0;
    }
  }

  lightning.forEach((l,i)=>{
    ctx.fillStyle=`rgba(0,255,255,${1-l.time/20})`;
    ctx.shadowColor='#0ff';
    ctx.shadowBlur=10;
    l.chars.split('').forEach((ch,j)=>{
      const x=(j+5)*fontSize;
      const y=(l.time*fontSize*0.5)%height;
      ctx.fillText(ch,x,y);
    });
    l.time++;
    if(l.time>20) lightning.splice(i,1);
  });

  requestAnimationFrame(drawMatrix);
}
drawMatrix();

window.addEventListener('resize',()=>{
  width=canvas.width=window.innerWidth;
  height=canvas.height=window.innerHeight;
  fontSize=Math.min(20,width/50);
  columns=Math.floor(width/fontSize);
  drops=new Array(columns).fill(1);
});
</script>
