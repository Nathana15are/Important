<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hollywood Extreme Hacker Matrix Simulator</title>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;overflow:hidden;background:black;font-family:Consolas,monospace;}
canvas{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;}
.glass{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  backdrop-filter: blur(16px) saturate(200%);
  background: rgba(0,0,0,0.25);
  border-radius:20px;
  border:1px solid rgba(0,255,0,0.3);
  padding:30px 40px;
  width:90%; max-width:800px;
  text-align:center;
  color:#0f0;
  z-index:1;
  box-shadow:0 0 25px rgba(0,255,0,0.7);
}
h1{margin:0;color:#0f0;text-shadow:0 0 10px #0f0,0 0 20px #00ff00;}
label{display:block;margin-top:10px;font-size:14px;color:#88ff88;}
input,select{width:100%;padding:10px;margin-top:6px;border-radius:10px;border:none;background:rgba(0,255,0,0.08);color:#0f0;font-size:16px;}
button{padding:10px 16px;margin:6px;border:none;border-radius:12px;background:linear-gradient(45deg,#0f0,#00aa00);color:#001f20;font-weight:700;cursor:pointer;transition:.2s;}
button:hover{filter:brightness(1.3);}
button.ghost{background:transparent;border:1px solid rgba(0,255,0,0.3);}
.controls{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:12px;}
.progress{height:18px;background:rgba(0,255,0,0.1);border-radius:999px;margin-top:12px;overflow:hidden;}
.progress>div{height:100%;width:0;background:linear-gradient(90deg,#0f0,#00ff00);box-shadow:0 0 20px #0f0;transition:width .05s linear;}
#summary{font-size:13px;margin-top:8px;color:#88ff88;}
@keyframes flash{0%,100%{text-shadow:0 0 10px #0f0,0 0 20px #00ff00;}50%{text-shadow:0 0 40px #0ff,0 0 80px #0ff;}}
.found-letter{animation:flash 0.2s ease-in-out;}
</style>
</head>
<body>
<canvas id="matrix"></canvas>
<div class="glass">
  <h1>⚡ Hollywood Extreme Hacker Matrix Simulator ⚡</h1>
  <label>Mot de passe</label>
  <input id="password" type="text" value="abc">
  <label>Tentatives/sec</label>
  <input id="rate" type="number" min="1" value="200">
  <div class="controls">
    <button id="startBtn">Lancer</button>
    <button id="stopBtn" class="ghost" disabled>Arrêter</button>
  </div>
  <div class="progress"><div id="bar"></div></div>
  <div id="summary">Clique sur Lancer pour commencer</div>
</div>
<audio id="beep" src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="></audio>

<script>
const canvas=document.getElementById('matrix');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

const pwdEl=document.getElementById('password'),rateEl=document.getElementById('rate'),
barEl=document.getElementById('bar'),summaryEl=document.getElementById('summary'),
startBtn=document.getElementById('startBtn'),stopBtn=document.getElementById('stopBtn'),
beep=document.getElementById('beep');

let simState={running:false,attempts:0n,prevAttempt:"",found:false,logs:[],timer:null};

const alphabet='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+[]{}|;:,.<>?';
let fontSize=20;
let columns=canvas.width/fontSize;
let drops=new Array(Math.floor(columns)).fill(1);

function* enumerator(len,chars){const idx=new Array(len).fill(0);const base=chars.length;if(base<=0)return;
while(true){yield idx.map(i=>chars[i]).join('');let pos=len-1;while(pos>=0){idx[pos]++;if(idx[pos]<base)break;idx[pos]=0;pos--}if(pos<0)return;}}

function startSim(){
  if(simState.running)return;
  const pwd=pwdEl.value||"",len=pwd.length,rate=Math.max(1,Number(rateEl.value)||1);
  if(len===0){alert("Mot de passe vide");return;}
  const alpha=alphabet;
  simState.gen=enumerator(len,alpha);
  simState.running=true;
  simState.attempts=0n;
  simState.prevAttempt="";
  simState.found=false;
  startBtn.disabled=true; stopBtn.disabled=false;
  
  simState.timer=setInterval(()=>{
    let chunk=Math.max(1,Math.floor(rate/20));
    for(let i=0;i<chunk;i++){
      const {value,done}=simState.gen.next(); if(done){simState.running=false;break;}
      simState.attempts+=1n; simState.prevAttempt=value; simState.logs.push(value);
      if(value===pwd){simState.found=true;simState.running=false;
        beep.currentTime=0;beep.play();
        flashAttempt(value);
        break;
      }
    }
    barEl.style.width=(Number(simState.attempts)/Math.pow(alphabet.length,len)*100).toFixed(2)+'%';
    summaryEl.textContent=`Essais: ${simState.attempts.toString()}${simState.found?" ✅ Trouvé!":""}`;
    if(!simState.running) clearInterval(simState.timer),startBtn.disabled=false,stopBtn.disabled=true;
  },50);
}

function flashAttempt(attempt){
  summaryEl.innerHTML = '';
  attempt.split('').forEach(ch=>{
    const span=document.createElement('span');
    span.textContent=ch;
    span.classList.add('found-letter');
    summaryEl.appendChild(span);
    createLightning(span);
  });
}

function createLightning(el){
  const lightning=document.createElement('span');
  lightning.textContent='⚡';
  lightning.style.position='absolute';
  lightning.style.color='#0ff';
  lightning.style.fontSize='20px';
  const rect=el.getBoundingClientRect();
  lightning.style.left=(rect.left+Math.random()*rect.width)+'px';
  lightning.style.top=(rect.top+Math.random()*rect.height)+'px';
  lightning.style.zIndex='10';
  document.body.appendChild(lightning);
  setTimeout(()=>lightning.remove(),300);
}

startBtn.addEventListener('click',startSim);
stopBtn.addEventListener('click',()=>{if(simState.timer)clearInterval(simState.timer);simState.running=false;startBtn.disabled=false;stopBtn.disabled=true;summaryEl.textContent+=" ⏹ Arrêt manuel";});

function drawMatrix(){
  ctx.fillStyle="rgba(0,0,0,0.05)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#0f0";
  ctx.font=fontSize+"px monospace";
  for(let i=0;i<drops.length;i++){
    const text=alphabet[Math.floor(Math.random()*alphabet.length)];
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    drops[i]++;
    if(drops[i]*fontSize>canvas.height || Math.random()>0.95) drops[i]=0;
  }
  requestAnimationFrame(drawMatrix);
}
drawMatrix();

window.addEventListener('resize',()=>{
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
  columns=canvas.width/fontSize;
  drops=new Array(Math.floor(columns)).fill(1);
});
</script>
</body>
</html>
